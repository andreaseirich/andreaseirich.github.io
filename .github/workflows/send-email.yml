name: Send Contact Email

on:
  workflow_dispatch:
    inputs:
      name:
        description: 'Name des Absenders'
        required: true
      email:
        description: 'E-Mail des Absenders'
        required: true
      message:
        description: 'Nachricht'
        required: true

jobs:
  send-email:
    runs-on: ubuntu-latest
    steps:
      - name: Send Email via curl
        run: |
          curl -X POST https://api.sendgrid.com/v3/mail/send \
            -H "Authorization: Bearer ${{ secrets.SENDGRID_API_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{
              "personalizations": [{
                "to": [{"email": "eirichandreas2004@icloud.com"}],
                "subject": "Kontaktanfrage von ${{ github.event.inputs.name }}"
              }],
              "from": {"email": "noreply@andreaseirich.github.io"},
              "content": [{
                "type": "text/plain",
                "value": "Name: ${{ github.event.inputs.name }}\nE-Mail: ${{ github.event.inputs.email }}\n\nNachricht:\n${{ github.event.inputs.message }}"
              }]
            }'
